{"ast":null,"code":"\"use strict\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport { useFetchUser } from \"../lib/user\";\n\nconst Profile = () => {\n  const getUserData = async user => {\n    let res = await fetch('/api/mongodb?id=' + user.sub);\n    const json = await res.json();\n    console.log(\"json\", json);\n\n    if (json.err) {\n      setError({\n        error: true\n      });\n    } else {\n      if (json.isTeacher) {\n        res = await fetch('/api/mongodb?groupId=' + json.groupId);\n        json.students = await res.json();\n        json.students = json.students.filter(student => student.isStudent);\n      } // console.log(\"json\", json)\n\n\n      setUserData(json);\n    }\n  };\n\n  let {\n    user,\n    loading\n  } = useFetchUser();\n  const {\n    0: userData,\n    1: setUserData\n  } = useState();\n  const {\n    0: error,\n    1: setError\n  } = useState();\n\n  if (user && !userData && !loading && !error) {\n    getUserData(user);\n  }\n\n  return __jsx(Layout, {\n    user: user,\n    loading: loading\n  }, __jsx(Head, null, __jsx(\"title\", null, \"Profile Page\"), __jsx(\"meta\", {\n    name: \"description\",\n    content: \"Profile Page\"\n  })), userData && __jsx(\"div\", {\n    id: \"main\",\n    className: \"alt\"\n  }, __jsx(\"section\", {\n    id: \"one\"\n  }, __jsx(\"div\", {\n    className: \"inner\"\n  }, __jsx(\"header\", {\n    className: \"major\"\n  }, __jsx(\"h1\", null, \"Profile\")), __jsx(\"div\", {\n    className: \"row 200%\"\n  }, __jsx(\"div\", {\n    className: \"6u 12u(medium)\"\n  }, __jsx(\"h2\", {\n    id: \"content\"\n  }, \"Nouamane Tazi\"), __jsx(\"ul\", {\n    className: \"alt\"\n  }, __jsx(\"li\", null, __jsx(\"strong\", null, \"Email :\"), \" \", userData.email), __jsx(\"li\", null, __jsx(\"strong\", null, \"Phone :\"), \" \", userData.phone)))), __jsx(\"div\", {\n    className: \"12u 12u(medium)\"\n  }, __jsx(\"h4\", null, \"Liste des \\xE9l\\xE8ves\"), __jsx(\"div\", {\n    className: \"table-wrapper\"\n  }, __jsx(\"table\", null, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Nom\"), __jsx(\"th\", null, \"Demandes\"), __jsx(\"th\", null, \"Fili\\xE8re\"), __jsx(\"th\", null, \"T\\xE9l\\xE9phone\"), __jsx(\"th\", null, \"Email\"))), __jsx(\"tbody\", null, userData.students.map(student => __jsx(\"tr\", null, __jsx(\"td\", null, student.name), __jsx(\"td\", null, student.wishes), __jsx(\"td\", null, student.filiere), __jsx(\"td\", null, student.phone), __jsx(\"td\", null, student.email)))))))))), error && __jsx(\"div\", {\n    id: \"main\",\n    className: \"alt\"\n  }, __jsx(\"section\", {\n    id: \"one\"\n  }, __jsx(\"div\", {\n    className: \"inner\"\n  }, __jsx(\"header\", {\n    className: \"major\"\n  }, __jsx(\"h1\", null, \"Profile\")), __jsx(\"h2\", {\n    id: \"content\"\n  }, \"Profile pas encore cr\\xE9\\xE9 !\"), __jsx(\"p\", null, \"Veuillez nous contacter..\")))));\n};\n\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}